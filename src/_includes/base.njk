<!doctype html>
<html lang="en">
  {% include "./_header.njk" %}
  <body>
    {% block main %}
    {% endblock %}
    <button id="backToTop" class="back-to-top" aria-label="Back to top">
      <i class="fa-solid fa-arrow-up"></i>
    </button>

    <script>
      // Back to Top button functionality
      const backToTopButton = document.getElementById('backToTop')

      // Show button when user scrolls down 300px
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopButton.classList.add('visible')
        } else {
          backToTopButton.classList.remove('visible')
        }
      })

      // Scroll to top when clicked
      backToTopButton.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth',
        })
      })
    </script>

    <script>
      function updateToggleButtonText() {
        const toggleButton = document.getElementById('toggleDarkMode')
        if (isDarkMode()) {
          toggleButton.classList.remove('fa-moon')
          toggleButton.classList.add('fa-sun')
        } else {
          toggleButton.classList.remove('fa-sun')
          toggleButton.classList.add('fa-moon')
        }
      }

      document
        .getElementById('toggleDarkMode')
        .addEventListener('click', function () {
          if (isDarkMode()) {
            localStorage.theme = 'light'
            document.documentElement.classList.remove('dark')
          } else {
            localStorage.theme = 'dark'
            document.documentElement.classList.add('dark')
          }
          updateToggleButtonText()
        })

      // Initial update for button text based on saved theme
      if (localStorage.theme === 'dark') {
        document.documentElement.classList.add('dark')
      }
      updateToggleButtonText()
    </script>
  </body>
</html>
